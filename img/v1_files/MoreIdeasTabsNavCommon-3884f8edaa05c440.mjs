"use strict";(self.modernJsonp=self.modernJsonp||[]).push([[12260],{107106:(e,t,r)=>{r.r(t),r.d(t,{default:()=>j});var n=r(667294),a=r(616550),o=r(20256),l=r(415761),i=r(19963),d=r(182997),s=r(909512),u=r(233846),c=r(94970),f=r(344500),h=r(241544),p=r(775232),m=r(635943),b=r(785893);function _(e){let{preload:t}=(0,m.G)(),{tabs:r,onChange:n,...l}=e,i=r.map(e=>{switch(e.kind){case"Entrypoint":return{href:(0,a.Gn)(e.route.kind,e.route.routeParams),...e.tab,_onMouseEnter:r=>{let n=e.preloadExtent??"Both";"None"!==n&&t(e.route,n),e.tab._onMouseEnter?.(r)}};case"Legacy":return e.tab;default:return(0,p.Z)(e)}});return(0,b.jsx)(o.mQ,{onChange:e=>{let a=r[e.activeTabIndex];a?.kind==="Entrypoint"&&t(a.route,"Both"),n?.(e)},tabs:i,...l})}let x=new o.Ry(6),g=new o.Ry(1),y={__style:{background:"linear-gradient(#B237A5, #2277B9)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"}};function k({boards:e,currentTabId:t,currentTabIndex:r,headerShadowContext:a,hideTabs:p,inLocalNavigation:m,isPartner:k,isTodayTabEnabled:w,nonFixed:v}){let S=(0,u.ZP)(),{logContextEvent:E}=(0,i.v)(),P=(0,n.useRef)(null),I=(0,n.useRef)(null),C=(0,n.useRef)(null),[R,j]=(0,n.useState)(0),[A,T]=(0,n.useState)(!1),[L,z]=(0,n.useState)(!1),[N,B]=(0,n.useState)(0),[F,M]=(0,n.useState)(0),O=(e,t)=>(0,b.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{background:`linear-gradient(to ${"back"===e?"right":"left"}, #FFFFFF 51.56%, rgba(255, 255, 255, 0) 100%`,padding:"back"===e?"8px 32px 8px 0":"8px 0 8px 32px"}},left:"back"===e,position:"absolute",right:"forward"===e,children:(0,b.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:{boxShadow:"0px 0px 8px 0px rgba(0, 0, 0, 0.1)"}},rounding:"circle",children:(0,b.jsx)(o.hU,{accessibilityLabel:"back"===e?S._('Previous tabs', 'localNav.tab.backArrow', 'accessibility label for local navigation back arrow'):S._('Next tabs', 'localNav.tab.fwdArrow', 'accessibility label for local navigation forward arrow'),bgColor:"white",icon:"back"===e?"arrow-back":"arrow-forward",onClick:t,size:"sm"})})}),Z=({activeTabIndex:t,currentTab:r})=>{if(!k&&m&&e?.[t-1]?.tab_type==="pinterest_picks")return 14584;switch(r){case"homefeed":return 11081;case"today":return 11674;default:return 11082}},D=(t=>{let n=[{kind:"Legacy",tab:{href:"/homefeed/",id:"homefeed",text:k&&!m?S._('For you', 'authHomefeed.moreIdeasNav.homefeed', 'Homefeed tab shown when user is a partner'):S._('All', 'authHomefeed.moreIdeasNav.homefeed', 'Homefeed tab shown when user is not a partner ')}}];if(k&&!m)return w?[...n,{kind:"Entrypoint",route:{kind:"/today/",routeParams:{}},tab:{id:"today",text:S._('Explore', 'authHomefeed.moreIdeasNav.explore', 'Explore tab shown when user is a partner')},preloadExtent:t}]:n;if(e&&m){let t=e.findIndex(e=>"board_more_ideas"===e.tab_type),a=e.findIndex(e=>"pinterest_picks"===e.tab_type);return[...n,...e.map((e,n)=>({kind:"Legacy",tab:{href:"pinterest_picks"===e.tab_type?"/?holidayFinds=true":`/?boardId=${e.id}`,id:String(e.id),text:"pinterest_picks"===e.tab_type&&r!==a+1?(0,b.jsx)(o.xu,{dangerouslySetInlineStyle:y,children:"Holiday finds"}):e.name,ref:n===t?I:void 0}}))]}return n})((0,h._)().preloadExtent),W=(0,n.useCallback)((e,t)=>{T(e>0),z(e<t)},[]),H=(0,n.useCallback)(e=>{let t=C.current;if(t&&null!=r){let n=t.children[0]?.children[0]?.children[r];if(n){let r=t.clientWidth,a=n.offsetLeft-(r-n.offsetWidth)/2;M(a=Math.max(0,Math.min(a,e))),W(a,e)}}},[r,W]),U=(0,n.useCallback)(()=>{let e=Math.min(F+(R-90),N);M(e),W(e,N)},[F,R,N,W]),Y=(0,n.useCallback)(()=>{let e=Math.max(F-(R-90),0);M(e),W(e,N)},[F,R,N,W]);(0,n.useEffect)(()=>(a.setSubheaderShadow("moreIdeas"),P.current&&c.Z.addObstruction("top",P.current),()=>{a.setSubheaderShadow(null)}),[a]),(0,n.useEffect)(()=>{let e=(0,d.Z)(()=>{let e=C.current;if(e){let t=e.children[0]?.scrollWidth||0,r=e.clientWidth,n=Math.max(0,t-r);j(r),B(n),M(Math.min(F,n)),H(n)}},200);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[F,H]),(0,n.useEffect)(()=>{let e=C.current;if(e){let t=e.children[0]?.scrollWidth||0,r=e.clientWidth,n=Math.max(0,t-r);j(r),B(n),M(Math.min(0,n)),H(n)}},[H]);let G=m?r:D.findIndex(e=>e.tab.id===t),V=G?D[G]:void 0;return(0,b.jsx)(o.xu,{ref:P,children:(0,b.jsx)(o.xu,{color:"default",dangerouslySetInlineStyle:{__style:{transform:p?"translateY(-100%)":"translateY(0)",transition:"all 0.3s ease-in-out",...a.isScrolled&&!m?f.Rz:{}}},position:v?"static":"fixed",width:"100%",zIndex:x,children:(0,b.jsxs)(o.xu,{ref:C,alignItems:"stretch",dangerouslySetInlineStyle:{__style:{overflowX:"clip"}},display:"flex",justifyContent:!k&&m?"start":"center",width:"100%",children:[(0,b.jsxs)(o.xu,{color:"default",dangerouslySetInlineStyle:{__style:{left:`-${F}px`,transition:"left 0.3s, right 0.3s"}},display:"flex",height:l.Z,justifyContent:!k&&m?"start":"center",paddingY:0,position:"relative",children:[(0,b.jsx)(_,{activeTabIndex:null!=G&&V?G:0,onChange:({activeTabIndex:e,event:t})=>{t.preventDefault();let r=D[e];r&&E({aux_data:{index:e.toString()},component:13184,element:Z({activeTabIndex:e,currentTab:r.tab.id}),event_type:101,view_parameter:3173,view_type:1})},tabs:D}),!k&&m&&I?.current&&(0,b.jsx)(s.Qp,{anchor:I?.current,experienceIds:[506684],forceDirection:!0,idealDirection:"down",placementId:11,showCaret:!0,textWeight:"normal",zIndex:f.NW})]}),m&&!k&&(0,b.jsxs)(o.xu,{alignItems:"center",display:"flex",justifyContent:"between",zIndex:g,children:[A&&O("back",Y),L&&O("forward",U)]})]})})})}var w=r(363402),v=r(725e3),S=r(857147),E=r(882368),P=r(94053),I=r(381262),C=r(965319);let R=({search:e})=>e&&"string"==typeof(0,S.mB)(e).boardId&&(0,S.mB)(e).boardId||null;function j({boards:e,currentTabIndex:t,hideTabs:r,inLocalNavigation:o,nonFixed:l}){let i=(0,I.WQ)(),{setIsContentHeaderPresent:d}=(0,P.i)(),s=(0,a.TH)(),u=(0,E.Z)(),c=!!u.isAuth&&u.isPartner,f=(0,v.Z)(),h=f?{component:8,element:11674}:Object.freeze({});return((0,w.Z)(h),(0,n.useEffect)(()=>(d(!0),function(){d(!1)}),[]),c&&s||o)?(0,b.jsx)(k,{boards:e,currentTabId:function(){let{pathname:e,search:t}=s;if(c){if("/following/"===e)return"following";else if(e.includes((0,C.tG)()))return"today";else if("/homefeed/"===e&&""===t)return"homefeed"}return R(s)}(),currentTabIndex:t,headerShadowContext:i,hideTabs:r,inLocalNavigation:o,isPartner:c,isTodayTabEnabled:f,nonFixed:l}):null}},363402:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(667294),a=r(19963),o=r(718369);let l=e=>{let t=(0,n.useRef)(!1),{logContextEvent:r}=(0,a.v)(),{viewType:l,viewParameter:i}=(0,o.SU)();(0,n.useEffect)(()=>{Object.entries(e).length>0&&!t.current&&l&&(r({event_type:13,view_type:l,view_parameter:i,...e}),t.current=!0)})}},817349:(e,t,r)=>{r.d(t,{Z:()=>n});let n={en:["US","GB","CA","IN","AU","ID"],es:["MX","PE","AR","CL","CO","ES","VE","UY","PY","EC","BO","CR","DO","SV","GT","HN","NI","PR","PA"],pt:["BR"],de:["DE","AT","CH"],fr:["FR"],id:["ID"],ja:["JP"],it:["IT"],sv:["SE"]}},725e3:(e,t,r)=>{r.d(t,{Z:()=>l});var n=r(174646),a=r(817349),o=r(882368);function l(){let e=(0,n.B)(),t=(0,o.Z)(),r=t.isAuth?t.country:e.country;if(void 0===e||void 0===e.locale)return!1;let l=e.locale.substring(0,2);return!!a.Z[l]?.includes(r)}},241544:(e,t,r)=>{r.d(t,{_:()=>a});var n=r(967312);function a(){let{checkExperiment:e}=(0,n.F)(),t=e("entrypoints_today_page_prefetch");switch(t.group){case"prefetch_all":return{preloadExtent:"Both"};case"prefetch_only_js":return{preloadExtent:"OnlyJS"};case"control":return{preloadExtent:"None"};default:{let{anyEnabled:e}=t;return{preloadExtent:e?"Both":"None"}}}}},965319:(e,t,r)=>{function n(e,t){return t?`${e}?${new URLSearchParams(t).toString()}`:e}function a(e){return n("/admin/",e)}function o(e){return n("/admin/oauth/logout/",e)}function l(e){return n("/today/",e)}r.d(t,{HF:()=>a,Kn:()=>o,tG:()=>l})},635943:(e,t,r)=>{r.d(t,{$:()=>m,G:()=>b});var n=r(667294),a=r(422578),o=r(616550),l=r(967312),i=r(174646);function d(e){let t={result:{kind:"Pending",promise:e},read:()=>(function(e){let{result:t}=e;switch(t.kind){case"Pending":throw t.promise;case"Ok":return t.value;case"Err":throw t.error;default:throw Error("Unexpected case")}})(t)};return e.then(e=>{t.result={kind:"Ok",value:e}}).catch(e=>{t.result={kind:"Err",error:e}}),t}let s={"/collage-creation-tool":{loader:()=>Promise.all([r.e(51961),r.e(92354)]).then(r.bind(r,107042)).then(e=>e.default),rootComponent:()=>Promise.all([r.e(97270),r.e(32777),r.e(51961),r.e(38956),r.e(498)]).then(r.bind(r,126159)).then(e=>e.default)},"/ideas":{loader:()=>Promise.all([r.e(97270),r.e(38545)]).then(r.bind(r,38523)).then(e=>e.default),rootComponent:()=>Promise.all([r.e(97270),r.e(8073)]).then(r.bind(r,484883)).then(e=>e.default)},"/pin/:id/analytics":{loader:()=>r.e(66724).then(r.bind(r,601511)).then(e=>e.default),rootComponent:()=>Promise.all([r.e(97270),r.e(30381),r.e(11859),r.e(8420),r.e(99263)]).then(r.bind(r,600148)).then(e=>e.default)},"/today/":{loader:()=>r.e(17587).then(r.bind(r,376881)).then(e=>e.default),rootComponent:()=>Promise.all([r.e(97270),r.e(73921),r.e(83901)]).then(r.bind(r,164390)).then(e=>e.default)}};var u=r(992114),c=r(785893);let f=(0,n.createContext)(null),h=/(^\/)|:|(\/$)/g,p=/\//g,m=({children:e})=>{let t=(0,a.useRelayEnvironment)(),{checkExperiment:r}=(0,l.F)(),d=(0,i.B)(),s=(0,n.useRef)({}),m=(0,n.useCallback)(e=>{let{rootComponent:n,loadedValueState:a}=x(_(s.current,e),e,"Both",t,r,d);return"NotYetRendered"===a.performanceLoggingState.kind&&(a.performanceLoggingState={kind:"InitiallyRendered",initialRenderTime:Date.now()}),{rootComponent:n,onEntrypointDataLoaded:t=>{if("InitiallyRendered"===a.performanceLoggingState.kind){let r=Date.now();(0,u.LY)("entrypointRouter.routeTiming."+e.kind.replace(h,"").replace(p,"_"),r-a.performanceLoggingState.initialRenderTime,{sampleRate:.1,tags:t??{}}),a.performanceLoggingState={kind:"Complete"}}},loadedValue:a.loadedValue}},[r,t,d]),b=(0,o.k6)(),g=(0,n.useCallback)(e=>{x(_(s.current,e),e,"Both",t,r,d);let n=(0,o.Gn)(e.kind,e.routeParams);b.push(n)},[b,r,t,d]),y=(0,n.useCallback)((e,n)=>{let a=_(s.current,e);"Both"===n&&x(a,e,n,t,r,d)},[r,t,d]),k=(0,n.useMemo)(()=>({loadAndReadDuringRender__INTERNAL:m,preload:y,imperativelyNavigate:g}),[m,g,y]);return(0,c.jsx)(f,{value:k,children:e})};function b(){let e=(0,n.useContext)(f);if(null==e)throw Error("Missing entrypoint context");return e}function _(e,t){let r=s[t.kind];if(null==r)throw Error("Unexpected missing route! Did you define it in routeMap.ts?");return e[t.kind]??={rootComponent:d(r.rootComponent()),loadedValueStates:{},loader:d(r.loader())}}function x(e,t,r,n,a,o){var l,i,s;let c=JSON.stringify(function e(t){if(!t||"object"!=typeof t)return t;if(Array.isArray(t))return t.map(e);let r=Object.keys(t).sort(),n={};for(let a=0;a<r.length;a++)n[r[a]]=e(t[r[a]]);return n}(t.routeParams)),{loadedValueStates:f,rootComponent:h,loader:p}=e;return{rootComponent:h,loadedValueState:f[c]??=(l=f,i=c,s=t.kind,setTimeout(()=>{let e=l[i];null!=e&&(0,u.nP)("entrypointRouter.entrypointUse",{sampleRate:.1,tags:{routeName:s,usedInTime:"NotYetRendered"!==e.performanceLoggingState.kind}})},3e4),{loadedValue:function(e,t){var r,n;let{result:a}=e;switch(a.kind){case"Pending":return d(a.promise.then(t));case"Ok":return{result:{kind:"Ok",value:r=t(a.value)},read:()=>r};case"Err":return{result:{kind:"Err",error:n=a.error},read:()=>{throw n}};default:throw Error("Unexpected case")}}(p,e=>e({routeParams:t.routeParams,relayEnvironment:n,checkExperiment:a,requestContext:o})),performanceLoggingState:{kind:"NotYetRendered"}})}}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/MoreIdeasTabsNavCommon-3884f8edaa05c440.mjs.map